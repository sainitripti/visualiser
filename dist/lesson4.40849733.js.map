{"version":3,"sources":["src/utils.js","src/js/LessonOnePreviewCard.js","src/js/lesson4.js"],"names":["file","colors","red","lightGrey","boxData","width","height","depth","widthSegments","heightSegments","depthSegments","rotateX","rotateY","rotateZ","positionX","positionY","positionZ","geometry","THREE","BoxGeometry","material","MeshBasicMaterial","transparent","color","opacity","side","DoubleSide","wireframe","cube","Mesh","axialCube","coronalCube","sagittalCube","arrCube","generateGeometry","forEach","element","dispose","rotation","x","y","z","position","gui","dat","GUI","autoPlace","customContainer","document","getElementById","appendChild","domElement","boxFolder","addFolder","add","onChange","step","open","LessonOnePreviewCard","id","guiId","stackHelperOrientation","cameraZoomInFactor","cameraOrientation","box","scale","container","renderer","WebGLRenderer","antialias","setSize","offsetWidth","offsetHeight","setClearColor","setPixelRatio","window","devicePixelRatio","scene","Scene","camera","AMI","OrthographicCamera","clientWidth","clientHeight","controls","TrackballOrthoControl","staticMoving","noRotate","onWindowResize","canvas","fitBox","addEventListener","loader","VolumeLoader","load","then","series","data","mergeSeries","stack","free","stackHelper","StackHelper","bbox","visible","border","orientation","Number","worldbb","worldBoundingBox","lpsDims","Vector3","center","worldCenter","clone","halfDimensions","directions","xCosine","yCosine","zCosine","update","catch","error","console","log","animate","render","requestAnimationFrame","camUtils","invertRows","invertColumns","rotate45","rotate","convention","cameraFolder","listen","conventionUpdate","value","stackFolder","dimensionsIJK","slice","fetch","response","json","updateGeometries","axial","sagittal","coronal","run"],"mappings":";;AEAA;;;;AAEA,IAAII,OAAO,GAAG;ADFd,ACGIC,AFHJ,EEGIA,KAAK,EAAE,EADG;AAEVC,AFHJ,EEGIA,MAAM,EAAE,EAFE;AAGVC,AFHG,EEGHA,EFHSP,GEGJ,CFHQ,CEGN,EAHG,AFAM,8EAAb;AEIHQ,EAAAA,aAAa,EAAE,CAJL;AAKVC,AFHG,EEGHA,EFHSR,MAAM,GAAG,GEGJ,EAAE,CALN;AAMVS,AFHFR,EEGEQ,AFHFR,GAAG,EAAE,QEGU,AFJK,EEIH,CANL;AAOVS,AFHFR,EEGEQ,AFHFR,OEGS,EAAE,AFHF,CEJG,CFID;AEITS,AFNkB,CAAf,CEMHA,OAAO,EAAE,CARC;AASVC,EAAAA,EDTiB6C,KCSV,EAAE,CATC;ADEZ,ACQE5C,AFFG,EEEHA,EFFOV,OEEE,AFFK,EEEH,CAVD,AFQO,kBCNPuD,EAAZ,EAAgBC,KAAhB,EAAuBC,sBAAvB,EAA+CC,kBAA/C,EAAmEC,iBAAnE,EAAsF;AAAA,ACSpFhD,AFFAV,EEEAU,AFFAV,KAAK,EAAE,EEEE,AFHQ,EEGN,CAXD;AAYVW,AFFAV,EEEAU,AFFAV,MAAM,EAAE,CEEC,CFJQ,CEIN;ADTX,ACHU,AFWVC,CEXJ,CFWIA,KAAK,ECRAoD,ADQE,ECRP,ADKiB,GCLPA,EAAV;AACA,ACWJkF,AFHIrI,EAAAA,GEGC,CAAC,GDXGoD,KAAL,CDQa,ECRAA,ADQE,CAJE,ICJjB,sDCWC,CAAL,CACCmC,IADD,CACM,UAAA+C,QAAQ,EAAI;ADXd,ACYD,AFJCrI,EAAAA,OCRKmB,ACYCkH,IDZN,GAAY,ADQE,CEIA,CAACC,AFJC,CALC,CCHD7H,ECYV,EAAP,CDZsB,CAACW,IAAV,CAAgBZ,eAAhB,EAA0BG,eAA1B,CAAZ;AACA,ACYH,AFJGV,CECJ,CFDIA,CEKHqF,IAJD,CAIM,CDbGlC,MDQQ,EAAE,CEKboC,AFXe,IEWX,EAAI,ODbV,GAA8BpC,sBAA9B;AACA,ACaFzD,AFLEO,EEKFP,AFLEO,OCRKmD,ACaA,AFLE,EAAE,CEKDmC,AFZS,IEYL,CAAC,SAAD,CDbZ,ACaF,GDb4BnC,kBAA1B;AACA,ACaFkF,AFLEpI,EEKFoI,A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","file":"lesson4.40849733.js","sourceRoot":"..","sourcesContent":["//export const file = 'https://cdn.rawgit.com/FNNDSC/data/master/nifti/adi_brain/adi_brain.nii.gz';\r\n//export const file = '..//data//adi_brain.nii.gz';\r\nexport const file = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/adi_brain.nii.gz';\r\n\r\nexport const colors = {\r\n  red: 0xff0000,\r\n  lightGrey: 0xffffff,\r\n};\r\n\r\n\r\nexport let boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n  };\r\n/*\r\nfetch(\"..//data//box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];\r\n  gui();\r\n  generateGeometry();\r\n});\r\n*/\r\n\r\nexport const geometry = new THREE.BoxGeometry( 1, 1, 1);\r\nexport const material = new THREE.MeshBasicMaterial( {transparent: true, color:0xff0000, opacity:0.5, side: THREE.DoubleSide, wireframe: true} );\r\n\r\nexport const cube = new THREE.Mesh( geometry, material );\r\nexport const axialCube = new THREE.Mesh( geometry, material );\r\nexport const coronalCube = new THREE.Mesh( geometry, material );\r\nexport const sagittalCube = new THREE.Mesh( geometry, material );\r\n\r\nconst arrCube = [cube, axialCube, coronalCube, sagittalCube];\r\nexport function generateGeometry() {\r\n  \r\n  arrCube.forEach(function(element)\r\n  {\r\n  \telement.geometry.dispose();\r\n  \telement.geometry = new THREE.BoxGeometry( \r\n\t  boxData.width, \r\n\t  boxData.height, \r\n\t  boxData.depth, \r\n\t  boxData.widthSegments, \r\n\t  boxData.heightSegments, \r\n\t  boxData.depthSegments);\r\n\telement.rotation.x = boxData.rotateX;\r\n\telement.rotation.y = boxData.rotateY;\r\n\telement.rotation.z = boxData.rotateZ;\r\n\telement.position.x = boxData.positionX;\r\n\telement.position.y = boxData.positionY;\r\n\telement.position.z = boxData.positionZ;\r\n  });\r\n  \r\n}\r\n\r\nfunction gui() {\r\n  const gui = new dat.GUI({\r\n    autoPlace: false,\r\n  });\r\n\r\n  const customContainer = document.getElementById('main-gui-container');\r\n  customContainer.appendChild(gui.domElement);\r\n\r\n  const boxFolder = gui.addFolder( 'Box Geometry' );\r\n\r\n  boxFolder.add( boxData, 'width', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'height', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depth', 1, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'widthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'heightSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'rotateX', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateY', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateZ', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData , 'positionX', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionY', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionZ', -100, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.open();\r\n};\r\n\r\n\r\n","import { colors, file, geometry, material } from '../utils.js';\r\n\r\nexport default class LessonOnePreviewCard {\r\n\r\n  constructor(id, guiId, stackHelperOrientation, cameraZoomInFactor, cameraOrientation) {\r\n    this.id = id;\r\n    this.guiId = guiId;\r\n    this.cube = new THREE.Mesh( geometry, material );\r\n    this.stackHelperOrientation = stackHelperOrientation;\r\n    this.cameraZoomInFactor = cameraZoomInFactor;\r\n    this.cameraOrientation = cameraOrientation;\r\n  }\r\n\r\n  generateGeometry(box) {\r\n\r\n    this.cube.scale.x = box.width;\r\n    this.cube.scale.y = box.height;\r\n    this.cube.scale.z = box.depth;\r\n    this.cube.rotation.x = box.rotateX * 0.01745329; // degree to radians\r\n    this.cube.rotation.y = box.rotateY * 0.01745329;\r\n    this.cube.rotation.z = box.rotateZ * 0.01745329;\r\n    this.cube.position.x = box.positionX;\r\n    this.cube.position.y = box.positionY;\r\n    this.cube.position.z = box.positionZ;\r\n  }\r\n\r\n  run() {\r\n    \r\n    // Setup renderer\r\n    const container = document.getElementById(this.id);\r\n    const renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n    renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    renderer.setClearColor(colors.lightGrey, 1);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    container.appendChild(renderer.domElement);\r\n\r\n    // Create scene\r\n    const scene = new THREE.Scene();\r\n    \r\n    scene.add(this.cube);\r\n\r\n    // Camera\r\n    const camera = new AMI.OrthographicCamera(\r\n      container.clientWidth / -2,\r\n      container.clientWidth / 2,\r\n      container.clientHeight / 2,\r\n      container.clientHeight / -2,\r\n      0.1,\r\n      10000\r\n    );\r\n\r\n    // Setup controls\r\n    const controls = new AMI.TrackballOrthoControl(camera, container);\r\n    controls.staticMoving = true;\r\n    controls.noRotate = true;\r\n    camera.controls = controls;\r\n\r\n    // Resize canvas when the window resizes\r\n    const onWindowResize = () => {\r\n      camera.canvas = {\r\n        width: container.offsetWidth,\r\n        height: container.offsetHeight,\r\n      };\r\n      camera.fitBox(2);\r\n\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    };\r\n    window.addEventListener('resize', onWindowResize, false);\r\n\r\n    // Load image data\r\n    const loader = new AMI.VolumeLoader(container);\r\n    loader\r\n      .load(file)\r\n      .then(() => {\r\n        const series = loader.data[0].mergeSeries(loader.data);\r\n        const stack = series[0].stack[0];\r\n        loader.free();\r\n\r\n        const stackHelper = new AMI.StackHelper(stack);\r\n        stackHelper.bbox.visible = false;\r\n        stackHelper.border.color = colors.red;\r\n        stackHelper.orientation = Number(this.stackHelperOrientation);\r\n        scene.add(stackHelper);\r\n\r\n        gui(stackHelper);\r\n\r\n        // center camera and interactor to center of bouding box\r\n        // for nicer experience\r\n        // set camera\r\n        const worldbb = stack.worldBoundingBox();\r\n        const lpsDims = new THREE.Vector3(\r\n          worldbb[1] - worldbb[0],\r\n          worldbb[3] - worldbb[2],\r\n          worldbb[5] - worldbb[4]\r\n        );\r\n\r\n        const box = {\r\n          center: stack.worldCenter().clone(),\r\n          halfDimensions: new THREE.Vector3(\r\n            lpsDims.x - this.cameraZoomInFactor, \r\n            lpsDims.y - this.cameraZoomInFactor, \r\n            lpsDims.z - this.cameraZoomInFactor),\r\n        };\r\n\r\n        // init and zoom\r\n        const canvas = {\r\n          width: container.clientWidth,\r\n          height: container.clientHeight,\r\n        };\r\n\r\n        camera.directions = [stack.xCosine, stack.yCosine, stack.zCosine];\r\n        camera.box = box;\r\n        camera.canvas = canvas;\r\n        camera.orientation = this.cameraOrientation;\r\n        camera.update();\r\n        camera.fitBox(2);\r\n      })\r\n      .catch(error => {\r\n        window.console.log('oops... something went wrong...');\r\n        window.console.log(error);\r\n      });\r\n\r\n    const animate = () => {\r\n      controls.update();\r\n      renderer.render(scene, camera);\r\n\r\n      requestAnimationFrame(function() {\r\n        animate();\r\n      });\r\n    };\r\n\r\n    animate();\r\n\r\n    // GUI\r\n    const gui = stackHelper => {\r\n    const gui = new dat.GUI({\r\n      autoPlace: false,\r\n    });\r\n\r\n    const customContainer = document.getElementById(this.guiId);\r\n    customContainer.appendChild(gui.domElement);\r\n    const camUtils = {\r\n      invertRows: false,\r\n      invertColumns: false,\r\n      rotate45: false,\r\n      rotate: 0,\r\n      orientation: 'axial',\r\n      convention: 'radio',\r\n    };\r\n\r\n    // camera\r\n    const cameraFolder = gui.addFolder('Camera');\r\n    const invertRows = cameraFolder.add(camUtils, 'invertRows');\r\n    invertRows.onChange(() => {\r\n      camera.invertRows();\r\n    });\r\n\r\n    const invertColumns = cameraFolder.add(camUtils, 'invertColumns');\r\n    invertColumns.onChange(() => {\r\n      camera.invertColumns();\r\n    });\r\n\r\n    const rotate45 = cameraFolder.add(camUtils, 'rotate45');\r\n    rotate45.onChange(() => {\r\n      camera.rotate();\r\n    });\r\n\r\n    cameraFolder\r\n      .add(camera, 'angle', 0, 360)\r\n      .step(1)\r\n      .listen();\r\n\r\n    const conventionUpdate = cameraFolder.add(camUtils, 'convention', ['radio', 'neuro']);\r\n    conventionUpdate.onChange(value => {\r\n      camera.convention = value;\r\n      camera.update();\r\n      camera.fitBox(2);\r\n    });\r\n\r\n    const stackFolder = gui.addFolder('Stack');\r\n    stackFolder\r\n      .add(stackHelper, 'index', 0, stackHelper.stack.dimensionsIJK.z - 1)\r\n      .step(1)\r\n      .listen();\r\n    stackFolder\r\n      .add(stackHelper.slice, 'interpolation', 0, 1)\r\n      .step(1)\r\n      .listen();\r\n\r\n  };\r\n\r\n  }\r\n}\r\n","import LessonOnePreviewCard from './LessonOnePreviewCard.js';\r\n\r\nvar boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n};\r\n\r\nfetch(\"https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];   \r\n  updateGeometries();\r\n});\r\n\r\nvar axial = new LessonOnePreviewCard(\"axial-container\", \"axial-gui-container\", \"0\", \"70\", \"axial\");\r\nvar sagittal = new LessonOnePreviewCard(\"sagittal-container\", \"sagittal-gui-container\", \"1\", \"50\", \"sagittal\");\r\nvar coronal = new LessonOnePreviewCard(\"coronal-container\", \"coronal-gui-container\", \"2\", \"55\", \"coronal\");\r\n\r\nfunction updateGeometries()\r\n{\r\n  axial.generateGeometry(boxData);\r\n  sagittal.generateGeometry(boxData);\r\n  coronal.generateGeometry(boxData);\r\n}\r\n\r\nfunction render()\r\n{ \r\n  axial.run();\r\n  sagittal.run();\r\n  coronal.run();\r\n}\r\n\r\n\r\nupdateGeometries();\r\nrender();\r\n/*\r\nconst boxId = \"l1\";\r\nvar boxGeometryPanel = new BoxGeometryPanel(boxData,boxId);\r\nboxGeometryPanel.render();\r\n\r\nfunction handleBoxGeometryChange(e)\r\n{\r\n  // Remove boxId appended at end of each Id\r\n  var property = e.target.id.slice(0,-boxId.length);\r\n  //Update boxData\r\n  boxData[property] = e.target.value;\r\n  updateGeometries();\r\n}\r\n\r\nconst boxGeometryL1 = document.getElementById(\"boxgeometry\"+boxId);\r\nconst properties = [\"width\",\"height\",\"depth\", \"rotateX\", \"rotateY\", \"rotateZ\", \"positionX\", \"positionY\", \"positionZ\"];\r\nproperties.forEach(property => document.getElementById(property+boxId)\r\n  .addEventListener(\"change\", handleBoxGeometryChange));\r\n*/"]}