{"version":3,"sources":["src/utils.js","src/js/LessonFourPreviewCard.js","src/js/lesson4.js"],"names":["file","file4","annotation","colors","red","lightGrey","boxData","width","height","depth","widthSegments","heightSegments","depthSegments","rotateX","rotateY","rotateZ","positionX","positionY","positionZ","geometry","THREE","BoxGeometry","material","MeshBasicMaterial","transparent","color","opacity","side","DoubleSide","wireframe","cube","Mesh","axialCube","coronalCube","sagittalCube","arrCube","generateGeometry","forEach","element","dispose","rotation","x","y","z","position","gui","dat","GUI","autoPlace","customContainer","document","getElementById","appendChild","domElement","boxFolder","addFolder","add","onChange","step","open","LessonFourPreviewCard","id","guiId","stackHelperOrientation","cameraZoomInFactor","cameraOrientation","box","scale","container","renderer","WebGLRenderer","antialias","setSize","offsetWidth","offsetHeight","setClearColor","setPixelRatio","window","devicePixelRatio","scene","Scene","scene2","camera","AMI","OrthographicCamera","clientWidth","clientHeight","controls","TrackballOrthoControl","staticMoving","noRotate","onWindowResize","canvas","fitBox","addEventListener","loader","VolumeLoader","load","then","series","data","mergeSeries","stack","free","stackHelper","StackHelper","bbox","visible","border","orientation","Number","worldbb","worldBoundingBox","lpsDims","Vector3","center","worldCenter","clone","halfDimensions","directions","xCosine","yCosine","zCosine","update","catch","error","console","log","loader2","animate","render","requestAnimationFrame","camUtils","invertRows","invertColumns","rotate45","rotate","convention","cameraFolder","listen","conventionUpdate","value","stackFolder","dimensionsIJK","slice","fetch","response","json","axial","sagittal","coronal","updateGeometries","run"],"mappings":"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","file":"lesson4.40849733.js","sourceRoot":"..","sourcesContent":["//export const file = 'https://cdn.rawgit.com/FNNDSC/data/master/nifti/adi_brain/adi_brain.nii.gz';\r\n//export const file = '..//data//adi_brain.nii.gz';\r\nexport const file = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/adi_brain.nii.gz';\r\nexport const file4 = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/training_sa_crop_pat0_transformed.nii.gz';\r\nexport const annotation = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/pat10.nii.gz';\r\n\r\nexport const colors = {\r\n  red: 0xff0000,\r\n  lightGrey: 0xffffff,\r\n};\r\n\r\n\r\nexport let boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n  };\r\n/*\r\nfetch(\"..//data//box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];\r\n  gui();\r\n  generateGeometry();\r\n});\r\n*/\r\n\r\nexport const geometry = new THREE.BoxGeometry( 1, 1, 1);\r\nexport const material = new THREE.MeshBasicMaterial( {transparent: true, color:0xff0000, opacity:0.5, side: THREE.DoubleSide, wireframe: true} );\r\n\r\nexport const cube = new THREE.Mesh( geometry, material );\r\nexport const axialCube = new THREE.Mesh( geometry, material );\r\nexport const coronalCube = new THREE.Mesh( geometry, material );\r\nexport const sagittalCube = new THREE.Mesh( geometry, material );\r\n\r\nconst arrCube = [cube, axialCube, coronalCube, sagittalCube];\r\nexport function generateGeometry() {\r\n  \r\n  arrCube.forEach(function(element)\r\n  {\r\n  \telement.geometry.dispose();\r\n  \telement.geometry = new THREE.BoxGeometry( \r\n\t  boxData.width, \r\n\t  boxData.height, \r\n\t  boxData.depth, \r\n\t  boxData.widthSegments, \r\n\t  boxData.heightSegments, \r\n\t  boxData.depthSegments);\r\n\telement.rotation.x = boxData.rotateX;\r\n\telement.rotation.y = boxData.rotateY;\r\n\telement.rotation.z = boxData.rotateZ;\r\n\telement.position.x = boxData.positionX;\r\n\telement.position.y = boxData.positionY;\r\n\telement.position.z = boxData.positionZ;\r\n  });\r\n  \r\n}\r\n\r\nfunction gui() {\r\n  const gui = new dat.GUI({\r\n    autoPlace: false,\r\n  });\r\n\r\n  const customContainer = document.getElementById('main-gui-container');\r\n  customContainer.appendChild(gui.domElement);\r\n\r\n  const boxFolder = gui.addFolder( 'Box Geometry' );\r\n\r\n  boxFolder.add( boxData, 'width', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'height', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depth', 1, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'widthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'heightSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'rotateX', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateY', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateZ', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData , 'positionX', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionY', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionZ', -100, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.open();\r\n};\r\n\r\n\r\n","import { colors, file4, annotation, geometry, material } from '../utils.js';\r\n\r\nexport default class LessonFourPreviewCard {\r\n\r\n  constructor(id, guiId, stackHelperOrientation, cameraZoomInFactor, cameraOrientation) {\r\n    this.id = id;\r\n    this.guiId = guiId;\r\n    this.cube = new THREE.Mesh( geometry, material );\r\n    this.stackHelperOrientation = stackHelperOrientation;\r\n    this.cameraZoomInFactor = cameraZoomInFactor;\r\n    this.cameraOrientation = cameraOrientation;\r\n  }\r\n\r\n  generateGeometry(box) {\r\n\r\n    this.cube.scale.x = box.width;\r\n    this.cube.scale.y = box.height;\r\n    this.cube.scale.z = box.depth;\r\n    this.cube.rotation.x = box.rotateX * 0.01745329; // degree to radians\r\n    this.cube.rotation.y = box.rotateY * 0.01745329;\r\n    this.cube.rotation.z = box.rotateZ * 0.01745329;\r\n    this.cube.position.x = box.positionX;\r\n    this.cube.position.y = box.positionY;\r\n    this.cube.position.z = box.positionZ;\r\n  }\r\n\r\n  run() {\r\n    \r\n    // Setup renderer\r\n    const container = document.getElementById(this.id);\r\n    const renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n    renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    renderer.setClearColor(colors.lightGrey, 1);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    container.appendChild(renderer.domElement);\r\n\r\n    // Create scene\r\n    const scene = new THREE.Scene();\r\n    const scene2 = new THREE.Scene();\r\n\r\n    \r\n    scene.add(this.cube);\r\n\r\n    // Camera\r\n    const camera = new AMI.OrthographicCamera(\r\n      container.clientWidth / -2,\r\n      container.clientWidth / 2,\r\n      container.clientHeight / 2,\r\n      container.clientHeight / -2,\r\n      0.1,\r\n      10000\r\n    );\r\n\r\n    // Setup controls\r\n    const controls = new AMI.TrackballOrthoControl(camera, container);\r\n    controls.staticMoving = true;\r\n    controls.noRotate = true;\r\n    camera.controls = controls;\r\n\r\n    // Resize canvas when the window resizes\r\n    const onWindowResize = () => {\r\n      camera.canvas = {\r\n        width: container.offsetWidth,\r\n        height: container.offsetHeight,\r\n      };\r\n      camera.fitBox(2);\r\n\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    };\r\n    window.addEventListener('resize', onWindowResize, false);\r\n\r\n    // Load image data\r\n    const loader = new AMI.VolumeLoader(container);\r\n    loader\r\n      .load(file4)\r\n      .then(() => {\r\n        const series = loader.data[0].mergeSeries(loader.data);\r\n        const stack = series[0].stack[0];\r\n        loader.free();\r\n\r\n        const stackHelper = new AMI.StackHelper(stack);\r\n        stackHelper.bbox.visible = false;\r\n        stackHelper.border.color = colors.red;\r\n        stackHelper.orientation = Number(this.stackHelperOrientation);\r\n        scene.add(stackHelper);\r\n\r\n        gui(stackHelper);\r\n\r\n        // center camera and interactor to center of bouding box\r\n        // for nicer experience\r\n        // set camera\r\n        const worldbb = stack.worldBoundingBox();\r\n        const lpsDims = new THREE.Vector3(\r\n          worldbb[1] - worldbb[0],\r\n          worldbb[3] - worldbb[2],\r\n          worldbb[5] - worldbb[4]\r\n        );\r\n\r\n        const box = {\r\n          center: stack.worldCenter().clone(),\r\n          halfDimensions: new THREE.Vector3(\r\n            lpsDims.x - this.cameraZoomInFactor, \r\n            lpsDims.y - this.cameraZoomInFactor, \r\n            lpsDims.z - this.cameraZoomInFactor),\r\n        };\r\n\r\n        // init and zoom\r\n        const canvas = {\r\n          width: container.clientWidth,\r\n          height: container.clientHeight,\r\n        };\r\n\r\n        camera.directions = [stack.xCosine, stack.yCosine, stack.zCosine];\r\n        camera.box = box;\r\n        camera.canvas = canvas;\r\n        camera.orientation = this.cameraOrientation;\r\n        camera.update();\r\n        camera.fitBox(2);\r\n      })\r\n      .catch(error => {\r\n        window.console.log('oops... something went wrong...');\r\n        window.console.log(error);\r\n      });\r\n\r\n    const loader2 = new AMI.VolumeLoader(container);\r\n    loader2\r\n      .load(annotation)\r\n      .then(() => {\r\n        const series = loader2.data[0].mergeSeries(loader.data);\r\n        const stack = series[0].stack[0];\r\n        loader2.free();\r\n\r\n        const stackHelper = new AMI.StackHelper(stack);\r\n        stackHelper.bbox.visible = false;\r\n        stackHelper.border.color = colors.red;\r\n        stackHelper.orientation = Number(this.stackHelperOrientation);\r\n        scene.add(stackHelper);\r\n\r\n        gui(stackHelper);\r\n\r\n        // center camera and interactor to center of bouding box\r\n        // for nicer experience\r\n        // set camera\r\n        const worldbb = stack.worldBoundingBox();\r\n        const lpsDims = new THREE.Vector3(\r\n          worldbb[1] - worldbb[0],\r\n          worldbb[3] - worldbb[2],\r\n          worldbb[5] - worldbb[4]\r\n        );\r\n\r\n        const box = {\r\n          center: stack.worldCenter().clone(),\r\n          halfDimensions: new THREE.Vector3(\r\n            lpsDims.x - this.cameraZoomInFactor, \r\n            lpsDims.y - this.cameraZoomInFactor, \r\n            lpsDims.z - this.cameraZoomInFactor),\r\n        };\r\n\r\n        // init and zoom\r\n        const canvas = {\r\n          width: container.clientWidth,\r\n          height: container.clientHeight,\r\n        };\r\n\r\n        camera.directions = [stack.xCosine, stack.yCosine, stack.zCosine];\r\n        camera.box = box;\r\n        camera.canvas = canvas;\r\n        camera.orientation = this.cameraOrientation;\r\n        camera.update();\r\n        camera.fitBox(2);\r\n      })\r\n      .catch(error => {\r\n        window.console.log('oops... something went wrong...');\r\n        window.console.log(error);\r\n      });\r\n\r\n\r\n    const animate = () => {\r\n      controls.update();\r\n\r\n      renderer.render(scene, camera);\r\n      //renderer.render(scene2, camera);\r\n      \r\n\r\n      requestAnimationFrame(function() {\r\n        animate();\r\n      });\r\n    };\r\n\r\n    animate();\r\n\r\n    // GUI\r\n    const gui = stackHelper => {\r\n    const gui = new dat.GUI({\r\n      autoPlace: false,\r\n    });\r\n\r\n    const customContainer = document.getElementById(this.guiId);\r\n    customContainer.appendChild(gui.domElement);\r\n    const camUtils = {\r\n      invertRows: false,\r\n      invertColumns: false,\r\n      rotate45: false,\r\n      rotate: 0,\r\n      orientation: 'axial',\r\n      convention: 'radio',\r\n    };\r\n\r\n    // camera\r\n    const cameraFolder = gui.addFolder('Camera');\r\n    const invertRows = cameraFolder.add(camUtils, 'invertRows');\r\n    invertRows.onChange(() => {\r\n      camera.invertRows();\r\n    });\r\n\r\n    const invertColumns = cameraFolder.add(camUtils, 'invertColumns');\r\n    invertColumns.onChange(() => {\r\n      camera.invertColumns();\r\n    });\r\n\r\n    const rotate45 = cameraFolder.add(camUtils, 'rotate45');\r\n    rotate45.onChange(() => {\r\n      camera.rotate();\r\n    });\r\n\r\n    cameraFolder\r\n      .add(camera, 'angle', 0, 360)\r\n      .step(1)\r\n      .listen();\r\n\r\n    const conventionUpdate = cameraFolder.add(camUtils, 'convention', ['radio', 'neuro']);\r\n    conventionUpdate.onChange(value => {\r\n      camera.convention = value;\r\n      camera.update();\r\n      camera.fitBox(2);\r\n    });\r\n\r\n    const stackFolder = gui.addFolder('Stack');\r\n    stackFolder\r\n      .add(stackHelper, 'index', 0, stackHelper.stack.dimensionsIJK.z - 1)\r\n      .step(1)\r\n      .listen();\r\n    stackFolder\r\n      .add(stackHelper.slice, 'interpolation', 0, 1)\r\n      .step(1)\r\n      .listen();\r\n\r\n  };\r\n\r\n  }\r\n}\r\n","import LessonFourPreviewCard from './LessonFourPreviewCard.js';\r\n\r\nvar boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n};\r\n\r\nfetch(\"https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];   \r\n  //updateGeometries();\r\n});\r\n\r\nvar axial = new LessonFourPreviewCard(\"axial-container\", \"axial-gui-container\", \"2\", \"20\", \"axial\");\r\nvar sagittal = new LessonFourPreviewCard(\"sagittal-container\", \"sagittal-gui-container\", \"0\", \"40\", \"sagittal\");\r\nvar coronal = new LessonFourPreviewCard(\"coronal-container\", \"coronal-gui-container\", \"1\", \"25\", \"coronal\");\r\n\r\n\r\nfunction updateGeometries()\r\n{\r\n  axial.generateGeometry(boxData);\r\n  sagittal.generateGeometry(boxData);\r\n  coronal.generateGeometry(boxData);\r\n}\r\n\r\nfunction render()\r\n{ \r\n  axial.run();\r\n  sagittal.run();\r\n  coronal.run();\r\n}\r\n\r\n\r\n//updateGeometries();\r\nrender();\r\n/*\r\nconst boxId = \"l1\";\r\nvar boxGeometryPanel = new BoxGeometryPanel(boxData,boxId);\r\nboxGeometryPanel.render();\r\n\r\nfunction handleBoxGeometryChange(e)\r\n{\r\n  // Remove boxId appended at end of each Id\r\n  var property = e.target.id.slice(0,-boxId.length);\r\n  //Update boxData\r\n  boxData[property] = e.target.value;\r\n  updateGeometries();\r\n}\r\n\r\nconst boxGeometryL1 = document.getElementById(\"boxgeometry\"+boxId);\r\nconst properties = [\"width\",\"height\",\"depth\", \"rotateX\", \"rotateY\", \"rotateZ\", \"positionX\", \"positionY\", \"positionZ\"];\r\nproperties.forEach(property => document.getElementById(property+boxId)\r\n  .addEventListener(\"change\", handleBoxGeometryChange));\r\n*/"]}