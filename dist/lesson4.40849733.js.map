{"version":3,"sources":["src/utils.js","src/js/LessonFourPreviewCard.js","src/js/BoxGeometryPanel.js","src/js/lesson4.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/bundle-loader.js","node_modules/parcel-bundler/src/builtins/loaders/browser/js-loader.js"],"names":["file","file4","annotation","colors","red","lightGrey","boxData","width","height","depth","widthSegments","heightSegments","depthSegments","rotateX","rotateY","rotateZ","positionX","positionY","positionZ","geometry","THREE","BoxGeometry","material","MeshBasicMaterial","transparent","color","opacity","side","DoubleSide","wireframe","cube","Mesh","axialCube","coronalCube","sagittalCube","arrCube","generateGeometry","forEach","element","dispose","rotation","x","y","z","position","gui","dat","GUI","autoPlace","customContainer","document","getElementById","appendChild","domElement","boxFolder","addFolder","add","onChange","step","open","LessonFourPreviewCard","id","guiId","stackHelperOrientation","cameraZoomInFactor","cameraOrientation","box","scale","container","renderer","WebGLRenderer","antialias","setSize","offsetWidth","offsetHeight","setClearColor","setPixelRatio","window","devicePixelRatio","scene","Scene","camera","AMI","OrthographicCamera","clientWidth","clientHeight","controls","TrackballOrthoControl","staticMoving","noRotate","onWindowResize","canvas","fitBox","addEventListener","loader","VolumeLoader","load","then","series","data","mergeSeries","stack","free","stackHelper","StackHelper","bbox","visible","border","orientation","Number","worldbb","worldBoundingBox","lpsDims","Vector3","center","worldCenter","clone","halfDimensions","directions","xCosine","yCosine","zCosine","update","catch","error","console","log","animate","render","requestAnimationFrame","camUtils","invertRows","invertColumns","rotate45","rotate","convention","cameraFolder","listen","conventionUpdate","value","stackFolder","dimensionsIJK","slice","BoxGeometryPanel","loadBoxGeometry","bind","saveBoxGeometry","fileData","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","link","createElement","download","href","click","boxGeometry","span","panel","className","row","textHeading","classList","innerHTML","text","input","setAttribute","fetch","response","json","updateGeometries","axial","sagittal","coronal","run","boxId","boxGeometryPanel","handleBoxGeometryChange","e","property","target","length","boxGeometryL1","properties","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","body","remove","stackTrace","innerText","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","match","getBaseURL","replace","exports","require","loadBundlesLazy","bundles","Promise","resolve","code","LazyPromise","reject","loadBundles","all","map","loadBundle","bundleLoaders","registerBundleLoader","register","substring","lastIndexOf","toLowerCase","bundleLoader","resolved","executor","promise","prototype","onSuccess","onError","loadJSBundle","script","async","charset","src","onerror","onload","getElementsByTagName"],"mappings":"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","file":"lesson4.40849733.js","sourceRoot":"..","sourcesContent":["//export const file = 'https://cdn.rawgit.com/FNNDSC/data/master/nifti/adi_brain/adi_brain.nii.gz';\r\n//export const file = '..//data//adi_brain.nii.gz';\r\nexport const file = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/adi_brain.nii.gz';\r\nexport const file4 = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/training_sa_crop_pat0_transformed.nii.gz';\r\nexport const annotation = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/pat10.nii.gz';\r\n\r\nexport const colors = {\r\n  red: 0xff0000,\r\n  lightGrey: 0xffffff,\r\n};\r\n\r\n\r\nexport let boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n  };\r\n/*\r\nfetch(\"..//data//box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];\r\n  gui();\r\n  generateGeometry();\r\n});\r\n*/\r\n\r\nexport const geometry = new THREE.BoxGeometry( 1, 1, 1);\r\nexport const material = new THREE.MeshBasicMaterial( {transparent: true, color:0xff0000, opacity:0.5, side: THREE.DoubleSide, wireframe: true} );\r\n\r\nexport const cube = new THREE.Mesh( geometry, material );\r\nexport const axialCube = new THREE.Mesh( geometry, material );\r\nexport const coronalCube = new THREE.Mesh( geometry, material );\r\nexport const sagittalCube = new THREE.Mesh( geometry, material );\r\n\r\nconst arrCube = [cube, axialCube, coronalCube, sagittalCube];\r\nexport function generateGeometry() {\r\n  \r\n  arrCube.forEach(function(element)\r\n  {\r\n  \telement.geometry.dispose();\r\n  \telement.geometry = new THREE.BoxGeometry( \r\n\t  boxData.width, \r\n\t  boxData.height, \r\n\t  boxData.depth, \r\n\t  boxData.widthSegments, \r\n\t  boxData.heightSegments, \r\n\t  boxData.depthSegments);\r\n\telement.rotation.x = boxData.rotateX;\r\n\telement.rotation.y = boxData.rotateY;\r\n\telement.rotation.z = boxData.rotateZ;\r\n\telement.position.x = boxData.positionX;\r\n\telement.position.y = boxData.positionY;\r\n\telement.position.z = boxData.positionZ;\r\n  });\r\n  \r\n}\r\n\r\nfunction gui() {\r\n  const gui = new dat.GUI({\r\n    autoPlace: false,\r\n  });\r\n\r\n  const customContainer = document.getElementById('main-gui-container');\r\n  customContainer.appendChild(gui.domElement);\r\n\r\n  const boxFolder = gui.addFolder( 'Box Geometry' );\r\n\r\n  boxFolder.add( boxData, 'width', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'height', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depth', 1, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'widthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'heightSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'rotateX', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateY', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateZ', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData , 'positionX', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionY', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionZ', -100, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.open();\r\n};\r\n\r\n\r\n","import { colors, file4, annotation, geometry, material } from '../utils.js';\r\n\r\nexport default class LessonFourPreviewCard {\r\n\r\n  constructor(id, guiId, stackHelperOrientation, cameraZoomInFactor, cameraOrientation) {\r\n    this.id = id;\r\n    this.guiId = guiId;\r\n    this.cube = new THREE.Mesh( geometry, material );\r\n    this.stackHelperOrientation = stackHelperOrientation;\r\n    this.cameraZoomInFactor = cameraZoomInFactor;\r\n    this.cameraOrientation = cameraOrientation;\r\n  }\r\n\r\n  generateGeometry(box) {\r\n\r\n    this.cube.scale.x = box.width;\r\n    this.cube.scale.y = box.height;\r\n    this.cube.scale.z = box.depth;\r\n    this.cube.rotation.x = box.rotateX * 0.01745329; // degree to radians\r\n    this.cube.rotation.y = box.rotateY * 0.01745329;\r\n    this.cube.rotation.z = box.rotateZ * 0.01745329;\r\n    this.cube.position.x = box.positionX;\r\n    this.cube.position.y = box.positionY;\r\n    this.cube.position.z = box.positionZ;\r\n  }\r\n\r\n  run() {\r\n    \r\n    // Setup renderer\r\n    const container = document.getElementById(this.id);\r\n    const renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n    renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    renderer.setClearColor(colors.lightGrey, 1);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    container.appendChild(renderer.domElement);\r\n\r\n    // Create scene\r\n    const scene = new THREE.Scene();\r\n    \r\n    scene.add(this.cube);\r\n\r\n    // Camera\r\n    const camera = new AMI.OrthographicCamera(\r\n      container.clientWidth / -2,\r\n      container.clientWidth / 2,\r\n      container.clientHeight / 2,\r\n      container.clientHeight / -2,\r\n      0.1,\r\n      10000\r\n    );\r\n\r\n    // Setup controls\r\n    const controls = new AMI.TrackballOrthoControl(camera, container);\r\n    controls.staticMoving = true;\r\n    controls.noRotate = true;\r\n    camera.controls = controls;\r\n\r\n    // Resize canvas when the window resizes\r\n    const onWindowResize = () => {\r\n      camera.canvas = {\r\n        width: container.offsetWidth,\r\n        height: container.offsetHeight,\r\n      };\r\n      camera.fitBox(2);\r\n\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    };\r\n    window.addEventListener('resize', onWindowResize, false);\r\n\r\n    // Load image data\r\n    const loader = new AMI.VolumeLoader(container);\r\n    loader\r\n      .load(file4)\r\n      .then(() => {\r\n        const series = loader.data[0].mergeSeries(loader.data);\r\n        const stack = series[0].stack[0];\r\n        loader.free();\r\n\r\n        const stackHelper = new AMI.StackHelper(stack);\r\n        stackHelper.bbox.visible = false;\r\n        stackHelper.border.color = colors.red;\r\n        stackHelper.orientation = Number(this.stackHelperOrientation);\r\n        scene.add(stackHelper);\r\n\r\n        gui(stackHelper);\r\n\r\n        // center camera and interactor to center of bouding box\r\n        // for nicer experience\r\n        // set camera\r\n        const worldbb = stack.worldBoundingBox();\r\n        const lpsDims = new THREE.Vector3(\r\n          worldbb[1] - worldbb[0],\r\n          worldbb[3] - worldbb[2],\r\n          worldbb[5] - worldbb[4]\r\n        );\r\n\r\n        const box = {\r\n          center: stack.worldCenter().clone(),\r\n          halfDimensions: new THREE.Vector3(\r\n            lpsDims.x - this.cameraZoomInFactor, \r\n            lpsDims.y - this.cameraZoomInFactor, \r\n            lpsDims.z - this.cameraZoomInFactor),\r\n        };\r\n\r\n        // init and zoom\r\n        const canvas = {\r\n          width: container.clientWidth,\r\n          height: container.clientHeight,\r\n        };\r\n\r\n        camera.directions = [stack.xCosine, stack.yCosine, stack.zCosine];\r\n        camera.box = box;\r\n        camera.canvas = canvas;\r\n        camera.orientation = this.cameraOrientation;\r\n        camera.update();\r\n        camera.fitBox(2);\r\n      })\r\n      .catch(error => {\r\n        window.console.log('oops... something went wrong...');\r\n        window.console.log(error);\r\n      });\r\n\r\n\r\n    const animate = () => {\r\n      controls.update();\r\n\r\n      renderer.render(scene, camera);\r\n\r\n      requestAnimationFrame(function() {\r\n        animate();\r\n      });\r\n    };\r\n\r\n    animate();\r\n\r\n    // GUI\r\n    const gui = stackHelper => {\r\n    const gui = new dat.GUI({\r\n      autoPlace: false,\r\n    });\r\n\r\n    const customContainer = document.getElementById(this.guiId);\r\n    customContainer.appendChild(gui.domElement);\r\n    const camUtils = {\r\n      invertRows: false,\r\n      invertColumns: false,\r\n      rotate45: false,\r\n      rotate: 0,\r\n      orientation: 'axial',\r\n      convention: 'radio',\r\n    };\r\n\r\n    // camera\r\n    const cameraFolder = gui.addFolder('Camera');\r\n    const invertRows = cameraFolder.add(camUtils, 'invertRows');\r\n    invertRows.onChange(() => {\r\n      camera.invertRows();\r\n    });\r\n\r\n    const invertColumns = cameraFolder.add(camUtils, 'invertColumns');\r\n    invertColumns.onChange(() => {\r\n      camera.invertColumns();\r\n    });\r\n\r\n    const rotate45 = cameraFolder.add(camUtils, 'rotate45');\r\n    rotate45.onChange(() => {\r\n      camera.rotate();\r\n    });\r\n\r\n    cameraFolder\r\n      .add(camera, 'angle', 0, 360)\r\n      .step(1)\r\n      .listen();\r\n\r\n    const conventionUpdate = cameraFolder.add(camUtils, 'convention', ['radio', 'neuro']);\r\n    conventionUpdate.onChange(value => {\r\n      camera.convention = value;\r\n      camera.update();\r\n      camera.fitBox(2);\r\n    });\r\n\r\n    const stackFolder = gui.addFolder('Stack');\r\n    stackFolder\r\n      .add(stackHelper, 'index', 0, stackHelper.stack.dimensionsIJK.z - 1)\r\n      .step(1)\r\n      .listen();\r\n    stackFolder\r\n      .add(stackHelper.slice, 'interpolation', 0, 1)\r\n      .step(1)\r\n      .listen();\r\n\r\n  };\r\n\r\n  }\r\n}\r\n","import \"../css/properties-sidebar.css\";\r\n\r\nexport default class BoxGeometryPanel {\r\n\r\n  constructor(box, id)\r\n  {   \r\n    this.id = id;\r\n    this.width = box.width;\r\n    this.height = box.height;\r\n    this.depth = box.depth;\r\n    this.widthSegments = box.widthSegments;\r\n    this.heightSegments = box.heightSegments;\r\n    this.depthSegments = box.depthSegments;\r\n    this.rotateX = box.rotateX;\r\n    this.rotateY = box.rotateY;\r\n    this.rotateZ = box.rotateZ; \r\n    this.positionX = box.positionX;\r\n    this.positionY = box.positionY;\r\n    this.positionZ = box.positionZ;  \r\n    \r\n    this.loadBoxGeometry = this.loadBoxGeometry.bind(this);\r\n    this.saveBoxGeometry = this.saveBoxGeometry.bind(this);\r\n    this.render = this.render.bind(this);\r\n  }\r\n\r\n  loadBoxGeometry() {\r\n\r\n  }\r\n\r\n  saveBoxGeometry() {\r\n    const fileData = JSON.stringify({\r\n      \"boxData\" : {\r\n        \"width\": this.width,\r\n        \"height\": this.height,\r\n        \"depth\": this.depth,\r\n        \"widthSegments\": this.widthSegments,\r\n        \"heightSegments\": this.heightSegments,\r\n        \"depthSegments\": this.depthSegments,\r\n        \"rotateX\": this.rotateX,\r\n        \"rotateY\": this.rotateY,\r\n        \"rotateZ\": this.rotateZ,\r\n        \"positionX\": this.positionX,\r\n        \"positionY\": this.positionY,\r\n        \"positionZ\": this.positionZ\r\n      }\r\n    });\r\n    const blob = new Blob([fileData], {type: \"text/plain\"});\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.download = 'box.json';\r\n    link.href = url;\r\n    link.click();\r\n  }\r\n\r\n\trender() {\r\n    var boxGeometry = document.createElement(\"div\");\r\n    boxGeometry.id = \"boxgeometry\"+this.id;\r\n\r\n    // Create a span child to this div\r\n    var span = document.createElement(\"span\");\r\n    boxGeometry.appendChild(span);\r\n\r\n    // Create a panel with box width, height and depth\r\n    var panel = document.createElement(\"div\");\r\n    panel.className = \"Panel\";\r\n    span.appendChild(panel);\r\n\r\n    // Width row\r\n    var row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n\r\n    var textHeading = document.createElement(\"span\");\r\n    textHeading.className = \"Text\";\r\n    textHeading.classList.add(\"Heading\");\r\n    textHeading.innerHTML = \"Box Dimensions\";\r\n    row.appendChild(textHeading);\r\n\r\n    var text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"width\";\r\n    row.appendChild(text);\r\n\r\n    var input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.className = \"Input\";\r\n    input.id = \"width\" + this.id;\r\n    input.value = this.width;\r\n    row.appendChild(input);\r\n    \r\n    // Height row\r\n\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"height\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.className = \"Input\";\r\n    input.id = \"height\" + this.id;\r\n    input.value = this.height;\r\n    row.appendChild(input);\r\n\r\n    // Depth row\r\n\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"depth\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.className = \"Input\";\r\n    input.id = \"depth\" + this.id;\r\n    input.value = this.depth;\r\n    row.appendChild(input);\r\n\r\n    // Create a panel with box rotation along X axis, Y axis and Z axis\r\n    panel = document.createElement(\"div\");\r\n    panel.className = \"Panel\";\r\n    span.appendChild(panel);\r\n\r\n    // ROtate X row\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    textHeading = document.createElement(\"span\");\r\n    textHeading.className = \"Text\";\r\n    textHeading.classList.add(\"Heading\");\r\n    textHeading.innerHTML = \"Box Rotation\";\r\n    row.appendChild(textHeading);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"x\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.setAttribute(\"min\", 0);\r\n    input.setAttribute(\"max\", 360);\r\n    input.className = \"Input\";\r\n    input.id = \"rotateX\" + this.id;\r\n    input.value = this.rotateX;\r\n    row.appendChild(input);\r\n    \r\n    // Rotate Y row\r\n\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"y\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.setAttribute(\"min\", 0);\r\n    input.setAttribute(\"max\", 360);\r\n    input.className = \"Input\";\r\n    input.id = \"rotateY\" + this.id;\r\n    input.value = this.rotateY;\r\n    row.appendChild(input);\r\n\r\n    // Rotate Z row\r\n\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"z\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.setAttribute(\"min\", 0);\r\n    input.setAttribute(\"max\", 360);\r\n    input.className = \"Input\";\r\n    input.id = \"rotateZ\" + this.id;\r\n    input.value = this.rotateZ;\r\n    row.appendChild(input);\r\n\r\n    // Create a panel with box position along X axis, Y axis and Z axis\r\n    panel = document.createElement(\"div\");\r\n    panel.className = \"Panel\";\r\n    span.appendChild(panel);\r\n\r\n    // Position X row\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    textHeading = document.createElement(\"span\");\r\n    textHeading.className = \"Text\";\r\n    textHeading.classList.add(\"Heading\");\r\n    textHeading.innerHTML = \"Box Position\";\r\n    row.appendChild(textHeading);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"x\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.className = \"Input\";\r\n    input.id = \"positionX\" + this.id;\r\n    input.value = this.positionX;\r\n    row.appendChild(input);\r\n    \r\n    // Position Y row\r\n\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"y\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.className = \"Input\";\r\n    input.id = \"positionY\" + this.id;\r\n    input.value = this.positionY;\r\n    row.appendChild(input);\r\n\r\n    // Position Z row\r\n\r\n    row = document.createElement(\"div\");\r\n    row.className = \"Row\";\r\n    panel.appendChild(row);\r\n\r\n    text = document.createElement(\"span\");\r\n    text.className = \"Text\";\r\n    text.innerHTML = \"z\";\r\n    row.appendChild(text);\r\n\r\n    input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"number\");\r\n    input.className = \"Input\";\r\n    input.id = \"positionZ\" + this.id;\r\n    input.value = this.positionZ;\r\n    row.appendChild(input);\r\n\r\n    document.getElementById(\"properties-sidebar-panel\").appendChild(boxGeometry);\r\n\t}\r\n\r\n}","import LessonFourPreviewCard from './LessonFourPreviewCard.js';\r\nimport BoxGeometryPanel from './BoxGeometryPanel.js';\r\n\r\nvar boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n};\r\n\r\nfetch(\"https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];   \r\n  updateGeometries();\r\n});\r\n\r\nvar axial = new LessonFourPreviewCard(\"axial-container\", \"axial-gui-container\", \"2\", \"20\", \"axial\");\r\nvar sagittal = new LessonFourPreviewCard(\"sagittal-container\", \"sagittal-gui-container\", \"0\", \"40\", \"sagittal\");\r\nvar coronal = new LessonFourPreviewCard(\"coronal-container\", \"coronal-gui-container\", \"1\", \"25\", \"coronal\");\r\n\r\n\r\nfunction updateGeometries()\r\n{\r\n  axial.generateGeometry(boxData);\r\n  sagittal.generateGeometry(boxData);\r\n  coronal.generateGeometry(boxData);\r\n}\r\n\r\nfunction render()\r\n{ \r\n  axial.run();\r\n  sagittal.run();\r\n  coronal.run();\r\n}\r\n\r\n\r\nupdateGeometries();\r\nrender();\r\n\r\nconst boxId = \"l4\";\r\nvar boxGeometryPanel = new BoxGeometryPanel(boxData,boxId);\r\nboxGeometryPanel.render();\r\n\r\nfunction handleBoxGeometryChange(e)\r\n{\r\n  // Remove boxId appended at end of each Id\r\n  var property = e.target.id.slice(0,-boxId.length);\r\n  //Update boxData\r\n  boxData[property] = e.target.value;\r\n  updateGeometries();\r\n}\r\n\r\nconst boxGeometryL1 = document.getElementById(\"boxgeometry\"+boxId);\r\nconst properties = [\"width\",\"height\",\"depth\", \"rotateX\", \"rotateY\", \"rotateZ\", \"positionX\", \"positionY\", \"positionZ\"];\r\nproperties.forEach(property => document.getElementById(property+boxId)\r\n  .addEventListener(\"change\", handleBoxGeometryChange));\r\n\r\n\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var getBundleURL = require('./bundle-url').getBundleURL;\n\nfunction loadBundlesLazy(bundles) {\n  if (!Array.isArray(bundles)) {\n    bundles = [bundles]\n  }\n\n  var id = bundles[bundles.length - 1];\n\n  try {\n    return Promise.resolve(require(id));\n  } catch (err) {\n    if (err.code === 'MODULE_NOT_FOUND') {\n      return new LazyPromise(function (resolve, reject) {\n        loadBundles(bundles.slice(0, -1))\n          .then(function () {\n            return require(id);\n          })\n          .then(resolve, reject);\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction loadBundles(bundles) {\n  return Promise.all(bundles.map(loadBundle));\n}\n\nvar bundleLoaders = {};\nfunction registerBundleLoader(type, loader) {\n  bundleLoaders[type] = loader;\n}\n\nmodule.exports = exports = loadBundlesLazy;\nexports.load = loadBundles;\nexports.register = registerBundleLoader;\n\nvar bundles = {};\nfunction loadBundle(bundle) {\n  var id;\n  if (Array.isArray(bundle)) {\n    id = bundle[1];\n    bundle = bundle[0];\n  }\n\n  if (bundles[bundle]) {\n    return bundles[bundle];\n  }\n\n  var type = (bundle.substring(bundle.lastIndexOf('.') + 1, bundle.length) || bundle).toLowerCase();\n  var bundleLoader = bundleLoaders[type];\n  if (bundleLoader) {\n    return bundles[bundle] = bundleLoader(getBundleURL() + bundle)\n      .then(function (resolved) {\n        if (resolved) {\n          module.bundle.register(id, resolved);\n        }\n\n        return resolved;\n      }).catch(function(e) {\n        delete bundles[bundle];\n        \n        throw e;\n      });\n  }\n}\n\nfunction LazyPromise(executor) {\n  this.executor = executor;\n  this.promise = null;\n}\n\nLazyPromise.prototype.then = function (onSuccess, onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.then(onSuccess, onError)\n};\n\nLazyPromise.prototype.catch = function (onError) {\n  if (this.promise === null) this.promise = new Promise(this.executor)\n  return this.promise.catch(onError)\n};\n","module.exports = function loadJSBundle(bundle) {\n  return new Promise(function (resolve, reject) {\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n    script.onerror = function (e) {\n      script.onerror = script.onload = null;\n      reject(e);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n};\n"]}