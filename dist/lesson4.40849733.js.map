{"version":3,"sources":["src/utils.js","src/js/LessonFourPreviewCard.js","src/js/lesson4.js"],"names":["file","file4","colors","red","lightGrey","boxData","width","height","depth","widthSegments","heightSegments","depthSegments","rotateX","rotateY","rotateZ","positionX","positionY","positionZ","geometry","THREE","BoxGeometry","material","MeshBasicMaterial","transparent","color","opacity","side","DoubleSide","wireframe","cube","Mesh","axialCube","coronalCube","sagittalCube","arrCube","generateGeometry","forEach","element","dispose","rotation","x","y","z","position","gui","dat","GUI","autoPlace","customContainer","document","getElementById","appendChild","domElement","boxFolder","addFolder","add","onChange","step","open","LessonFourPreviewCard","id","guiId","stackHelperOrientation","cameraZoomInFactor","cameraOrientation","box","scale","container","renderer","WebGLRenderer","antialias","setSize","offsetWidth","offsetHeight","setClearColor","setPixelRatio","window","devicePixelRatio","scene","Scene","camera","AMI","OrthographicCamera","clientWidth","clientHeight","controls","TrackballOrthoControl","staticMoving","noRotate","onWindowResize","canvas","fitBox","addEventListener","loader","VolumeLoader","load","then","series","data","mergeSeries","stack","free","stackHelper","StackHelper","bbox","visible","border","orientation","Number","worldbb","worldBoundingBox","lpsDims","Vector3","center","worldCenter","clone","halfDimensions","directions","xCosine","yCosine","zCosine","update","catch","error","console","log","animate","render","requestAnimationFrame","camUtils","invertRows","invertColumns","rotate45","rotate","convention","cameraFolder","listen","conventionUpdate","value","stackFolder","dimensionsIJK","slice","fetch","response","json","axial","sagittal","coronal","updateGeometries","run"],"mappings":";;AEAA;;;;AAEA,IAAIK,OAAO,GAAG;ADFd,ACGIC,AFHJ,EEGIA,KAAK,EAAE,EADG;AAEVC,AFHJ,EEGIA,MAAM,EAAE,EAFE;AAGVC,AFHG,EEGHA,EFHSR,GEGJ,CFHQ,CEGN,EAHG,AFAM,8EAAb;AEIHS,EAAAA,aAAa,EAAE,CAJL;AAKVC,AFJG,EEIHA,EFJST,KAAK,GAAG,IEIH,EAAE,CALN,mFFCP;AEKHU,EAAAA,aAAa,EAAE,CANL;AAOVC,AFJG,EEIHA,EFJSV,KEIF,CFJQ,CEIN,CAPC,CFGQ;AEKlBW,AFJFV,EEIEU,AFJFV,GAAG,EAAE,EEII,EAAE,CARC,GFGQ;AEMlBW,AFJFV,EEIEU,AFJFV,ECLmBuD,KCSV,EAAE,AFJF,CELG,CFKD;ACHX,ACQE5C,AFPkB,CAAf,CEOHA,SAAS,EAAE,CAVD,mBDEA6C,EAAZ,EAAgBC,KAAhB,EAAuBC,sBAAvB,EAA+CC,kBAA/C,EAAmEC,iBAAnE,EAAsF;AAAA,ACSpFhD,EAAAA,SAAS,EAAE,CAXD;AAYVC,AFHG,EEGHA,EFHOZ,OEGE,AFHK,EEGH,CFHM;ACNjB,ACHU,AFUVC,CEVJ,CFUIA,KAAK,ECPAsD,ADOE,ECPP,ADMiB,GCNPA,EAAV;AACA,ACWJkF,AFJIvI,EAAAA,GEIC,CAAC,EFJI,CCPDsD,CDOG,EAFS,ECLjB,GAAaA,KAAb,sDCWC,CAAL,CACCmC,IADD,CACM,UAAA+C,QAAQ,EAAI;ADXd,ACYD,AFLCvI,EAAAA,KAAK,ECPAqB,ACYCkH,AFLC,EAHU,ECJjB,GAAY,CCYE,CAACC,EDZC7H,ECYV,EAAP,CDZsB,CAACW,IAAV,CAAgBZ,eAAhB,EAA0BG,eAA1B,CAAZ;AACA,ACYH,AFLGZ,CEEJ,CFFIA,CEMHuF,IAJD,CAIM,CDbGlC,MDOQ,EAAE,CEMboC,AFVe,IEUX,EAAI,ODbV,GAA8BpC,sBAA9B;AACA,ACaFzD,AFNEK,EEMFL,AFNEK,OCPKqD,ACaA,GAAGmC,IAAI,AFNE,CEMD,CFNG,CALC,OEWL,CDbZ,ACaF,CADY,CAEZ,CDd4BnC,kBAA1B;AACA,ACcH,AFPGpD,CEAJ,CFAIA,OCPKqD,MDOQ,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","file":"lesson4.40849733.js","sourceRoot":"..","sourcesContent":["//export const file = 'https://cdn.rawgit.com/FNNDSC/data/master/nifti/adi_brain/adi_brain.nii.gz';\r\n//export const file = '..//data//adi_brain.nii.gz';\r\nexport const file = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/adi_brain.nii.gz';\r\nexport const file4 = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/training_sa_crop_pat0.nii.gz';\r\n\r\nexport const colors = {\r\n  red: 0xff0000,\r\n  lightGrey: 0xffffff,\r\n};\r\n\r\n\r\nexport let boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n  };\r\n/*\r\nfetch(\"..//data//box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];\r\n  gui();\r\n  generateGeometry();\r\n});\r\n*/\r\n\r\nexport const geometry = new THREE.BoxGeometry( 1, 1, 1);\r\nexport const material = new THREE.MeshBasicMaterial( {transparent: true, color:0xff0000, opacity:0.5, side: THREE.DoubleSide, wireframe: true} );\r\n\r\nexport const cube = new THREE.Mesh( geometry, material );\r\nexport const axialCube = new THREE.Mesh( geometry, material );\r\nexport const coronalCube = new THREE.Mesh( geometry, material );\r\nexport const sagittalCube = new THREE.Mesh( geometry, material );\r\n\r\nconst arrCube = [cube, axialCube, coronalCube, sagittalCube];\r\nexport function generateGeometry() {\r\n  \r\n  arrCube.forEach(function(element)\r\n  {\r\n  \telement.geometry.dispose();\r\n  \telement.geometry = new THREE.BoxGeometry( \r\n\t  boxData.width, \r\n\t  boxData.height, \r\n\t  boxData.depth, \r\n\t  boxData.widthSegments, \r\n\t  boxData.heightSegments, \r\n\t  boxData.depthSegments);\r\n\telement.rotation.x = boxData.rotateX;\r\n\telement.rotation.y = boxData.rotateY;\r\n\telement.rotation.z = boxData.rotateZ;\r\n\telement.position.x = boxData.positionX;\r\n\telement.position.y = boxData.positionY;\r\n\telement.position.z = boxData.positionZ;\r\n  });\r\n  \r\n}\r\n\r\nfunction gui() {\r\n  const gui = new dat.GUI({\r\n    autoPlace: false,\r\n  });\r\n\r\n  const customContainer = document.getElementById('main-gui-container');\r\n  customContainer.appendChild(gui.domElement);\r\n\r\n  const boxFolder = gui.addFolder( 'Box Geometry' );\r\n\r\n  boxFolder.add( boxData, 'width', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'height', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depth', 1, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'widthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'heightSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'rotateX', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateY', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateZ', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData , 'positionX', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionY', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionZ', -100, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.open();\r\n};\r\n\r\n\r\n","import { colors, file4, geometry, material } from '../utils.js';\r\n\r\nexport default class LessonFourPreviewCard {\r\n\r\n  constructor(id, guiId, stackHelperOrientation, cameraZoomInFactor, cameraOrientation) {\r\n    this.id = id;\r\n    this.guiId = guiId;\r\n    this.cube = new THREE.Mesh( geometry, material );\r\n    this.stackHelperOrientation = stackHelperOrientation;\r\n    this.cameraZoomInFactor = cameraZoomInFactor;\r\n    this.cameraOrientation = cameraOrientation;\r\n  }\r\n\r\n  generateGeometry(box) {\r\n\r\n    this.cube.scale.x = box.width;\r\n    this.cube.scale.y = box.height;\r\n    this.cube.scale.z = box.depth;\r\n    this.cube.rotation.x = box.rotateX * 0.01745329; // degree to radians\r\n    this.cube.rotation.y = box.rotateY * 0.01745329;\r\n    this.cube.rotation.z = box.rotateZ * 0.01745329;\r\n    this.cube.position.x = box.positionX;\r\n    this.cube.position.y = box.positionY;\r\n    this.cube.position.z = box.positionZ;\r\n  }\r\n\r\n  run() {\r\n    \r\n    // Setup renderer\r\n    const container = document.getElementById(this.id);\r\n    const renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n    renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    renderer.setClearColor(colors.lightGrey, 1);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    container.appendChild(renderer.domElement);\r\n\r\n    // Create scene\r\n    const scene = new THREE.Scene();\r\n    \r\n    scene.add(this.cube);\r\n\r\n    // Camera\r\n    const camera = new AMI.OrthographicCamera(\r\n      container.clientWidth / -2,\r\n      container.clientWidth / 2,\r\n      container.clientHeight / 2,\r\n      container.clientHeight / -2,\r\n      0.1,\r\n      10000\r\n    );\r\n\r\n    // Setup controls\r\n    const controls = new AMI.TrackballOrthoControl(camera, container);\r\n    controls.staticMoving = true;\r\n    controls.noRotate = true;\r\n    camera.controls = controls;\r\n\r\n    // Resize canvas when the window resizes\r\n    const onWindowResize = () => {\r\n      camera.canvas = {\r\n        width: container.offsetWidth,\r\n        height: container.offsetHeight,\r\n      };\r\n      camera.fitBox(2);\r\n\r\n      renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n    };\r\n    window.addEventListener('resize', onWindowResize, false);\r\n\r\n    // Load image data\r\n    const loader = new AMI.VolumeLoader(container);\r\n    loader\r\n      .load(file4)\r\n      .then(() => {\r\n        const series = loader.data[0].mergeSeries(loader.data);\r\n        const stack = series[0].stack[0];\r\n        loader.free();\r\n\r\n        const stackHelper = new AMI.StackHelper(stack);\r\n        stackHelper.bbox.visible = false;\r\n        stackHelper.border.color = colors.red;\r\n        stackHelper.orientation = Number(this.stackHelperOrientation);\r\n        scene.add(stackHelper);\r\n\r\n        gui(stackHelper);\r\n\r\n        // center camera and interactor to center of bouding box\r\n        // for nicer experience\r\n        // set camera\r\n        const worldbb = stack.worldBoundingBox();\r\n        const lpsDims = new THREE.Vector3(\r\n          worldbb[1] - worldbb[0],\r\n          worldbb[3] - worldbb[2],\r\n          worldbb[5] - worldbb[4]\r\n        );\r\n\r\n        const box = {\r\n          center: stack.worldCenter().clone(),\r\n          halfDimensions: new THREE.Vector3(\r\n            lpsDims.x - this.cameraZoomInFactor, \r\n            lpsDims.y - this.cameraZoomInFactor, \r\n            lpsDims.z - this.cameraZoomInFactor),\r\n        };\r\n\r\n        // init and zoom\r\n        const canvas = {\r\n          width: container.clientWidth,\r\n          height: container.clientHeight,\r\n        };\r\n\r\n        camera.directions = [stack.xCosine, stack.yCosine, stack.zCosine];\r\n        camera.box = box;\r\n        camera.canvas = canvas;\r\n        camera.orientation = this.cameraOrientation;\r\n        camera.update();\r\n        camera.fitBox(2);\r\n      })\r\n      .catch(error => {\r\n        window.console.log('oops... something went wrong...');\r\n        window.console.log(error);\r\n      });\r\n\r\n    const animate = () => {\r\n      controls.update();\r\n      renderer.render(scene, camera);\r\n\r\n      requestAnimationFrame(function() {\r\n        animate();\r\n      });\r\n    };\r\n\r\n    animate();\r\n\r\n    // GUI\r\n    const gui = stackHelper => {\r\n    const gui = new dat.GUI({\r\n      autoPlace: false,\r\n    });\r\n\r\n    const customContainer = document.getElementById(this.guiId);\r\n    customContainer.appendChild(gui.domElement);\r\n    const camUtils = {\r\n      invertRows: false,\r\n      invertColumns: false,\r\n      rotate45: false,\r\n      rotate: 0,\r\n      orientation: 'axial',\r\n      convention: 'radio',\r\n    };\r\n\r\n    // camera\r\n    const cameraFolder = gui.addFolder('Camera');\r\n    const invertRows = cameraFolder.add(camUtils, 'invertRows');\r\n    invertRows.onChange(() => {\r\n      camera.invertRows();\r\n    });\r\n\r\n    const invertColumns = cameraFolder.add(camUtils, 'invertColumns');\r\n    invertColumns.onChange(() => {\r\n      camera.invertColumns();\r\n    });\r\n\r\n    const rotate45 = cameraFolder.add(camUtils, 'rotate45');\r\n    rotate45.onChange(() => {\r\n      camera.rotate();\r\n    });\r\n\r\n    cameraFolder\r\n      .add(camera, 'angle', 0, 360)\r\n      .step(1)\r\n      .listen();\r\n\r\n    const conventionUpdate = cameraFolder.add(camUtils, 'convention', ['radio', 'neuro']);\r\n    conventionUpdate.onChange(value => {\r\n      camera.convention = value;\r\n      camera.update();\r\n      camera.fitBox(2);\r\n    });\r\n\r\n    const stackFolder = gui.addFolder('Stack');\r\n    stackFolder\r\n      .add(stackHelper, 'index', 0, stackHelper.stack.dimensionsIJK.z - 1)\r\n      .step(1)\r\n      .listen();\r\n    stackFolder\r\n      .add(stackHelper.slice, 'interpolation', 0, 1)\r\n      .step(1)\r\n      .listen();\r\n\r\n  };\r\n\r\n  }\r\n}\r\n","import LessonFourPreviewCard from './LessonFourPreviewCard.js';\r\n\r\nvar boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n};\r\n\r\nfetch(\"https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];   \r\n  //updateGeometries();\r\n});\r\n\r\nvar axial = new LessonFourPreviewCard(\"axial-container\", \"axial-gui-container\", \"2\", \"20\", \"axial\");\r\nvar sagittal = new LessonFourPreviewCard(\"sagittal-container\", \"sagittal-gui-container\", \"0\", \"40\", \"sagittal\");\r\nvar coronal = new LessonFourPreviewCard(\"coronal-container\", \"coronal-gui-container\", \"1\", \"25\", \"coronal\");\r\n\r\n\r\nfunction updateGeometries()\r\n{\r\n  axial.generateGeometry(boxData);\r\n  sagittal.generateGeometry(boxData);\r\n  coronal.generateGeometry(boxData);\r\n}\r\n\r\nfunction render()\r\n{ \r\n  axial.run();\r\n  sagittal.run();\r\n  coronal.run();\r\n}\r\n\r\n\r\n//updateGeometries();\r\nrender();\r\n/*\r\nconst boxId = \"l1\";\r\nvar boxGeometryPanel = new BoxGeometryPanel(boxData,boxId);\r\nboxGeometryPanel.render();\r\n\r\nfunction handleBoxGeometryChange(e)\r\n{\r\n  // Remove boxId appended at end of each Id\r\n  var property = e.target.id.slice(0,-boxId.length);\r\n  //Update boxData\r\n  boxData[property] = e.target.value;\r\n  updateGeometries();\r\n}\r\n\r\nconst boxGeometryL1 = document.getElementById(\"boxgeometry\"+boxId);\r\nconst properties = [\"width\",\"height\",\"depth\", \"rotateX\", \"rotateY\", \"rotateZ\", \"positionX\", \"positionY\", \"positionZ\"];\r\nproperties.forEach(property => document.getElementById(property+boxId)\r\n  .addEventListener(\"change\", handleBoxGeometryChange));\r\n*/"]}