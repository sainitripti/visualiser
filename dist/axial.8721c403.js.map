{"version":3,"sources":["src/utils.js","src/axial.js"],"names":["file","colors","red","lightGrey","boxData","width","height","depth","widthSegments","heightSegments","depthSegments","rotateX","rotateY","rotateZ","positionX","positionY","positionZ","geometry","THREE","BoxGeometry","material","MeshBasicMaterial","transparent","color","opacity","side","DoubleSide","wireframe","cube","Mesh","axialCube","coronalCube","sagittalCube","arrCube","generateGeometry","forEach","element","dispose","rotation","x","y","z","position","gui","dat","GUI","autoPlace","customContainer","document","getElementById","appendChild","domElement","boxFolder","addFolder","add","onChange","step","open","container","renderer","WebGLRenderer","antialias","setSize","offsetWidth","offsetHeight","setClearColor","setPixelRatio","window","devicePixelRatio","scene","Scene","camera","AMI","OrthographicCamera","clientWidth","clientHeight","controls","TrackballOrthoControl","staticMoving","noRotate","onWindowResize","canvas","fitBox","addEventListener","loader","VolumeLoader","load","then","series","data","mergeSeries","stack","free","stackHelper","StackHelper","bbox","visible","border","orientation","worldbb","worldBoundingBox","lpsDims","Vector3","box","center","worldCenter","clone","halfDimensions","directions","xCosine","yCosine","zCosine","update","catch","error","console","log","animate","render","requestAnimationFrame","camUtils","invertRows","invertColumns","rotate45","rotate","convention","cameraFolder","listen","conventionUpdate","value","stackFolder","dimensionsIJK","slice"],"mappings":";;ACAA;;AAEA;AACA,IAAM0D,SAAS,GAAGV,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAlB;AACA,IAAMU,QAAQ,GAAG,IAAIzC,KAAK,CAAC0C,aAAV,CAAwB;AACvCC,ADLF,ECKEA,SAAS,EAAE;AAD4B,ADHzC,CCGiB,CAAjB;AAGAF,ADLO,IAAM3D,ICKL,ADLS,CCKR8D,EDLW,KCKpB,CAAiBJ,SAAS,CAACK,WAA3B,EAAwCL,SAAS,CAACM,YAAlD,2BDLO;ACMPL,QAAQ,CAACM,aAAT,CAAuBhE,cAAOE,SAA9B,EAAyC,CAAzC;AACAwD,ADLO,IAAM1D,ICKL,CAACiE,CDLU,GAAG,SCKtB,CAAuBC,MAAM,CAACC,gBAA9B;AACAV,ADLExD,EAAAA,GAAG,EAAE,ECKE,CAACgD,KDNY,MCMtB,CAAsBS,QAAQ,CAACR,UAA/B;AAEA,ADNEhD,EAAAA,ECMIkE,KAAK,EDNA,CCMG,CDND,GCMKnD,KAAK,CAACoD,KAAV,EAAd;AAEAD,ADVsB,CAAf,ICUF,CAACf,GAAN,CAAWxB,gBAAX;AAEA,IAAMyC,MAAM,GAAG,IAAIC,GAAG,CAACC,kBAAR,CACbf,SAAS,CAACgB,WAAV,GAAwB,CAAC,CADZ,EAEbhB,SAAS,CAACgB,WAAV,GAAwB,CAFX,EAGbhB,SAAS,CAACiB,YAAV,GAAyB,CAHZ,EAIbjB,SAAS,CAACiB,YAAV,GAAyB,CAAC,CAJb,EAKb,GALa,EAMb,KANa,CAAf,EASA;ADfO,IAAIvE,OAAO,GAAG;ACgBrB,ADfIC,EAAAA,ECeEuE,GDfG,EAAE,EADU,CCgBP,GAAG,IAAIJ,GAAG,CAACK,qBAAR,CAA8BN,MAA9B,EAAsCb,SAAtC,CAAjB;AACAkB,ADfItE,EAAAA,MCeI,ADfE,CCeDwE,CDfG,EAFS,SCiBrB,GAAwB,IAAxB;AACAF,ADfIrE,EAAAA,KAAK,CCeD,CAACwE,ADfE,EAHU,MCkBrB,GAAoB,IAApB;AACAR,ADfI/D,EAAAA,ICeE,CAACoE,QAAP,ADfiB,EAAE,CCeDA,ADnBG,QCmBrB;ADdInE,EAAAA,cAAc,EAAE,CALC;ACqBrB,ADfIC,EAAAA,ECeEsE,WDfW,EAAE,CCeC,ADrBC,GCqBE,SAAjBA,cAAiB,GAAM;AAC3BT,ADfE5D,ECeF4D,ADfE5D,MCeI,CAACsE,ADfE,EAAE,CAPQ,GCsBnB,GAAgB;AACd5E,ADfAO,EAAAA,ECeAP,KAAK,ADfE,ECeAqD,ADfE,CARQ,QCuBD,CAACK,WADH;AAEdzD,ADfAO,EAAAA,ECeAP,KDfO,CCeD,CDfG,CCeDoD,ADxBS,SCwBA,CAACM;AAFJ,ADZdlD,EAAAA,CCYF,QDZW,EAAE,CAVM;AC0BnByD,ADfExD,ECeFwD,ADfExD,MCeI,CAACmE,EDfI,EAAE,CAXM,CC0BnB,CAAc,CAAd;AAEAvB,ADhBE3C,ECgBF2C,ADhBE3C,QCgBM,CAAC8C,ADhBE,EAAE,KCgBb,CAAiBJ,SAAS,CAACK,WAA3B,EAAwCL,SAAS,CAACM,YAAlD;AACD,AD7BoB,CCqBrB,ADrBO;AAcP;ACgBAG,ADfA,MCeM,CAACgB,gBAAP,CAAwB,QAAxB,EAAkCH,cAAlC,EAAkD,KAAlD;AAEA,ADhBA,ICgBMI,MAAM,GAAG,IAAIZ,GAAG,CAACa,YAAR,CAAqB3B,SAArB,CAAf;AACA0B,ADhBA,MCgBM,CACHE,IADH,CACQtF,WADR,EAEGuF,IAFH,CAEQ,YAAM;AACV,ADlBJ,MCkBUC,MAAM,GAAGJ,MAAM,CAACK,IAAP,CAAY,CAAZ,EAAeC,WAAf,CAA2BN,MAAM,CAACK,IAAlC,CAAf;AACA,ADlBJ,MCkBUE,KAAK,GAAGH,MAAM,CAAC,CAAD,CAAN,CAAUG,KAAV,CAAgB,CAAhB,CAAd;AACAP,ADlBJ,ECkBIA,MAAM,CAACQ,IAAP;AAEA,ADnBJ,MCmBUC,WAAW,GAAG,IAAIrB,GAAG,CAACsB,WAAR,CAAoBH,KAApB,CAApB;AACAE,ADnBJ,ECmBIA,WAAW,CAACE,IAAZ,CAAiBC,OAAjB,GAA2B,KAA3B;AACAH,ADnBJ,ECmBIA,WAAW,CAACI,MAAZ,CAAmB1E,KAAnB,GAA2BtB,cAAOC,GAAlC;AACA2F,ADnBJ,ECmBIA,WAAW,CAACK,WAAZ,GAA0B,CAA1B;AACA7B,EAAAA,KAAK,CAACf,GAAN,CAAUuC,WAAV;AAEAlD,EAAAA,GAAG,CAACkD,WAAD,CAAH,CAXU,CAaV;AACA,ADvBJ,IAAM5E,QAAQ,GAAG,IAAIC,KAAK,CAACC,WAAV,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAAjB;ACwBI,ADvBJ,IAAMC,QAAQ,GAAG,IAAIF,KAAK,CAACG,iBAAV,CAA6B;AAACC,EAAAA,WAAW,EAAE,IAAd;ACwB1C,ADxB8DC,EAAAA,ICwBxD4E,CDxB6D,EAAC,ICwBvD,GAAGR,CDxB0B,ICwBrB,CAACS,gBAAN,EAAhB;AACA,ADzB8E5E,EAAAA,ICyBxE6E,GDzB+E,EAAC,ECyBzE,CDzB6B,ECyB1B,IAAInF,KAAK,CAACoF,OAAV,CACdH,OAAO,CAAC,CAAD,CAAP,GAAaA,OAAO,CAAC,CAAD,CADN,EAEdA,OAAO,CAAC,CAAD,CAAP,GAAaA,OAAO,CAAC,CAAD,CAFN,EAGdA,OAAO,CAAC,CAAD,CAAP,GAAaA,OAAO,CAAC,CAAD,CAHN,CAAhB;AAMA,AD/B2F1E,EAAAA,IC+BrF8E,AD/ByF,EAAErF,CC+BxF,GAAG,CD/B0F,CAACQ,UAA7D;ACgCxC8E,ADhCiH7E,EAAAA,ECgCjH6E,MAAM,CDhCoH,CCgClHb,CDhCoH,ICgC/G,CAACc,WAAN,GAAoBC,KAApB,EADE;AAEVC,ADjCwC,CAA7B,CAAjB,ECiCMA,cAAc,EAAE,IAAIzF,KAAK,CAACoF,OAAV,CAAkBD,OAAO,CAAC9D,CAAR,GAAU,EAA5B,EAAgC8D,OAAO,CAAC7D,CAAR,GAAU,EAA1C,EAA8C6D,OAAO,CAAC5D,CAAR,GAAU,EAAxD;AAFN,AD7BT,GC6BH,CAvBU,ADNDb,CCkCT,GDlCa,GAAG,IAAIV,KAAK,CAACW,IAAV,CAAgBZ,QAAhB,EAA0BG,QAA1B,CAAb;;ACmCH,ADlCG,IAAMU,ECkCHmD,MAAM,CDlCM,ECkCH,CDlCM,IAAI/D,KAAK,CAACW,IAAV,CAAgBZ,QAAhB,EAA0BG,QAA1B,CAAlB;ACmCDf,IAAAA,KAAK,EAAEqD,SAAS,CAACgB,WADJ;AAEbpE,ADnCC,ICmCDA,ADnCOyB,MCmCD,EAAE2B,GDnCU,GAAG,GCmCJ,CAACiB,ADnCOzD,KAAK,CAACW,IAAV,CAAgBZ,QAAhB,EAA0BG,QAA1B,CAApB;ACiCY,GAAf;AAKAmD,ADrCG,ECqCHA,EDrCSvC,ICqCH,CAAC4E,ODrCc,GCqCrB,ADrCwB,GCqCJ,CAACjB,ADrCOzE,KCqCF,ADrCO,CCqCN2F,ADrCOhF,IAAV,CAAgBZ,ECqCpB,EAAgB0E,IDrCZ,CCqCiB,CAACmB,ADrCQ1F,OCqC9B,CDrCI,CCqC2BuE,ADrChD,KCqCqD,CAACoB,OAArC,CAApB;AACAxC,EAAAA,MAAM,CAACgC,GAAP,GAAaA,GAAb;AACAhC,ADrCJ,ECqCIA,EDrCEtC,ICqCI,CAACgD,EDrCE,GAAG,CCqCZ,ADrCarD,GCqCGqD,CDrCJ,EAAOnD,GCqCnB,MDrCY,EAAkBC,WAAlB,EAA+BC,YAA/B,CAAhB;ACsCIuC,EAAAA,MAAM,CAAC2B,WAAP,GAAqB,OAArB;AACA3B,ADtCG,ECsCHA,MAAM,CAACyC,ADtCK9E,MCsCZ,UDtCG,GAA4B;ACuC/BqC,ADrCFtC,ECqCEsC,ADrCFtC,MCqCQ,CAACiD,ADrCF,CAAC/C,KCqCN,CAAc,CAAd,ADrCF,CAAgB,UAASC,OAAT,EAChB;ACqCC,ADpCAA,CCNH,EA2CG6E,CDrCA7E,ICNH,CA2CS,EDrCC,CAACnB,OCqCFiG,CDrCN,CAAiB7E,GCqCN,EAAI,EDrCf;ACsCC8B,ADrCD/B,ECqCC+B,EDrCD/B,ICqCO,CAAC+E,EDrCD,CAAClG,ICqCP,CAAemG,GAAf,ADrCD,CCqCoB,EDrCD,IAAIlG,KAAK,CAACC,WAAV,CACnBf,OAAO,CAACC,CCoCP,IDrCkB,EAEnBD,OAAO,CAACE,MAFW,EAGnBF,OAAO,CAACG,KAHW,EAInBH,OAAO,CAACI,aAJW,EAKnBJ,OAAO,CAACK,cALW,EAMnBL,OAAO,CAACM,aANW,CAAnB;ACsCCyD,AD/BH/B,EC+BG+B,ED/BH/B,IC+BS,CAAC+E,ED/BH,CAAC7E,IC+BL,CAAe8E,GAAf,AD/BH,CC+BsBF,AD/BL3E,CAAjB,GAAqBnC,CC+BlB,MD/ByB,CAACO,OAA7B;ACgCE,AD/BFyB,CCfD,GDeCA,OAAO,CAACE,QAAR,CAAiBE,CAAjB,GAAqBpC,OAAO,CAACQ,OAA7B;AACAwB,IAAAA,OAAO,CAACE,QAAR,CAAiBG,CAAjB,GAAqBrC,OAAO,CAACS,OAA7B;ACgCD,AD/BCuB,IC+BKiF,AD/BLjF,OC+BY,AD/BL,CAACM,EC+BO,MD/Bf,CAAiBH,CAAjB,CC+BK8E,ED/BgBjH,KC+BN,ED/Ba,CC+BP,AD/BQU,SAA7B;ACgCC8D,AD/BDxC,EC+BCwC,ED/BDxC,MC+BS,CAAC4E,AD/BH,CAACtE,KC+BP,GD/BD,CAAiBF,CAAjB,GAAqBpC,OAAO,CAACW,SAA7B;ACgCC4C,AD/BDvB,EC+BCuB,ED/BDvB,MC+BS,CAACkF,AD/BH,CAAC5E,KC+BP,CAAgB2B,ED/BjB,CAAiB5B,CAAjB,CC+BC,EAAuB8B,AD/BHnE,MC+BpB,CD/B2B,CAACY,SAA7B;ACiCCuG,ADhCC,ECgCDA,CDhDA,oBCgDqB,CAAC,YAAW;AAC/BF,AD/BH,IC+BGA,OAAO;AACR,GAFoB,CAArB;AAGD,AD/BD,CCwBA,QDxBS1E,GAAT,GAAe;AACb,MAAMA,GAAG,GAAG,IAAIC,GAAG,CAACC,GAAR,CAAY;ACgC1BwE,AD/BIvE,IAAAA,GC+BG,MD/BM,EAAE;AADW,GAAZ,CAAZ;ACkCF,AD9BE,IC8BIH,ED9BEI,CC8BC,GAAG,WD9BW,EC8BX8C,CD9Bc7C,QAAQ,CAACC,CC8BZ,EAAI,WD9BD,CAAwB,oBAAxB,CAAxB;AC+BA,AD9BAF,EAAAA,IC8BMJ,GAAG,GAAG,IAAIC,CD9BD,CAACM,CC8BG,CAACL,GAAR,CAAY,KD9BxB,CAA4BF,GAAG,CAACQ,UAAhC;AC+BEL,AD7BF,IC6BEA,ED7BIM,OC6BK,EAAE,AD7BE,GAAGT,GAAG,CAACU,SAAJ,CAAe,cAAf,CAAlB;AC4BwB,AD1BxBD,EAAAA,CC0BY,CAAZ,OD1BS,CAACE,GAAV,CAAelD,OAAf,EAAwB,OAAxB,EAAiC,CAAjC,EAAoC,GAApC,EAA0CmD,QAA1C,CAAoDrB,gBAApD;AC8BA,AD7BAkB,EAAAA,IC6BML,KD7BG,CAACO,GAAV,CAAelD,KC6BM,ED7BrB,CC6BwB4C,CD7BA,OC6BQ,CAACC,AD7BjC,EAAkC,CAAlC,EAAqC,GAArC,EAA2CM,IC6BnB,CAAwB,GD7BhD,CAAqDrB,gBAArD,CC6BwB,CAAxB;AACAa,AD7BAK,EC6BAL,AD7BAK,SAAS,CAACE,GAAV,CAAelD,CC6BA,CAAC8C,KD7BhB,EAAwB,IC6BxB,CAA4BP,ED7B5B,CC6B+B,CAACQ,AD7BC,CAAjC,EAAoC,GAApC,EAA0CI,EC6B1C,MD7BA,CAAoDrB,gBAApD;AC8BA,AD5BAkB,EAAAA,IC4BMoE,KD5BG,CAAClE,EC4BI,CD5Bd,CAAelD,CC4BE,MD5BjB,EAAwB,eAAxB,EAAyC,CAAzC,EAA4C,EAA5C,EAAiDoD,IAAjD,CAAuD,CAAvD,EAA2DD,QAA3D,CAAqErB,gBAArE;AC6BEuF,AD5BFrE,EAAAA,EC4BEqE,OD5BO,CAACnE,EC4BE,CD5BZ,CC4Bc,AD5BClD,KC2BE,ED3BjB,EAAwB,gBAAxB,EAA0C,CAA1C,EAA6C,EAA7C,EAAkDoD,IAAlD,CAAwD,CAAxD,EAA4DD,QAA5D,CAAsErB,gBAAtE;AC6BEwF,AD5BFtE,EAAAA,EC4BEsE,OD5BO,CAACpE,GAAV,CAAelD,CC4BA,EAAE,ID5BjB,CC0BiB,CD1BO,eAAxB,EAAyC,CAAzC,EAA4C,EAA5C,EAAiDoD,IAAjD,CAAuD,CAAvD,EAA2DD,QAA3D,CAAqErB,gBAArE;AC6BEyF,AD3BFvE,EAAAA,EC2BEuE,OD3BO,CC2BC,AD3BArE,EC2BE,CD3BZ,CAAelD,GCwBE,IDxBjB,EAAwB,SAAxB,EAAmC,CAAnC,EAAsC,GAAtC,EAA4CmD,QAA5C,CAAsDrB,gBAAtD;AC4BE0F,AD3BFxE,EAAAA,EC2BEwE,MAAM,CD3BC,CC2BC,AD3BAtE,CCuBO,EDvBjB,CAAelD,OAAf,EAAwB,SAAxB,EAAmC,CAAnC,EAAsC,GAAtC,EAA4CmD,QAA5C,CAAsDrB,gBAAtD;AC4BEgE,AD3BF9C,EAAAA,EC2BE8C,OD3BO,CAAC5C,GC2BG,AD3Bb,CAAelD,CC2BA,MD3Bf,CCsBiB,CDtBO,SAAxB,EAAmC,CAAnC,EAAsC,GAAtC,EAA4CmD,QAA5C,CAAsDrB,gBAAtD;AC4BE2F,AD3BFzE,EAAAA,EC2BEyE,OD3BO,CAACvE,EC2BE,CD3BZ,CC2Bc,AD3BClD,OAAf,EAAyB,WAAzB,EAAsC,CAAC,GAAvC,EAA4C,GAA5C,EAAkDmD,QAAlD,CAA4DrB,gBAA5D;ACqBiB,ADpBjBkB,EAAAA,CCoBA,CAPyB,CAgBzB,MD7BS,CAACE,GAAV,CAAelD,OAAf,EAAwB,WAAxB,EAAqC,CAAC,GAAtC,EAA2C,GAA3C,EAAiDmD,QAAjD,CAA2DrB,gBAA3D;AACAkB,EAAAA,SAAS,CAACE,GAAV,CAAelD,OAAf,EAAwB,WAAxB,EAAqC,CAAC,GAAtC,EAA2C,GAA3C,EAAiDmD,QAAjD,CAA2DrB,gBAA3D;AC6BA,AD3BAkB,EAAAA,IC2BM0E,KD3BG,CAACrE,IAAV,EC2BkB,GAAGd,GAAG,CAACU,SAAJ,CAAc,QAAd,CAArB;AACA,AD3BD,MC2BOoE,UAAU,GAAGK,YAAY,CAACxE,GAAb,CAAiBkE,QAAjB,EAA2B,YAA3B,CAAnB;AACAC,EAAAA,UAAU,CAAClE,QAAX,CAAoB,YAAM;AACxBgB,AD7BH,IC6BGA,MAAM,CAACkD,UAAP;AACD,GAFD;AAIA,MAAMC,aAAa,GAAGI,YAAY,CAACxE,GAAb,CAAiBkE,QAAjB,EAA2B,eAA3B,CAAtB;AACAE,EAAAA,aAAa,CAACnE,QAAd,CAAuB,YAAM;AAC3BgB,IAAAA,MAAM,CAACmD,aAAP;AACD,GAFD;AAIA,MAAMC,QAAQ,GAAGG,YAAY,CAACxE,GAAb,CAAiBkE,QAAjB,EAA2B,UAA3B,CAAjB;AACAG,EAAAA,QAAQ,CAACpE,QAAT,CAAkB,YAAM;AACtBgB,IAAAA,MAAM,CAACqD,MAAP;AACD,GAFD;AAIAE,EAAAA,YAAY,CACTxE,GADH,CACOiB,MADP,EACe,OADf,EACwB,CADxB,EAC2B,GAD3B,EAEGf,IAFH,CAEQ,CAFR,EAGGuE,MAHH;AAKA,MAAMC,gBAAgB,GAAGF,YAAY,CAACxE,GAAb,CAAiBkE,QAAjB,EAA2B,YAA3B,EAAyC,CAAC,OAAD,EAAU,OAAV,CAAzC,CAAzB;AACAQ,EAAAA,gBAAgB,CAACzE,QAAjB,CAA0B,UAAA0E,KAAK,EAAI;AACjC1D,IAAAA,MAAM,CAACsD,UAAP,GAAoBI,KAApB;AACA1D,IAAAA,MAAM,CAACyC,MAAP;AACAzC,IAAAA,MAAM,CAACW,MAAP,CAAc,CAAd;AACD,GAJD;AAMA,MAAMgD,WAAW,GAAGvF,GAAG,CAACU,SAAJ,CAAc,OAAd,CAApB;AACA6E,EAAAA,WAAW,CACR5E,GADH,CACOuC,WADP,EACoB,OADpB,EAC6B,CAD7B,EACgCA,WAAW,CAACF,KAAZ,CAAkBwC,aAAlB,CAAgC1F,CAAhC,GAAoC,CADpE,EAEGe,IAFH,CAEQ,CAFR,EAGGuE,MAHH;AAIAG,EAAAA,WAAW,CACR5E,GADH,CACOuC,WAAW,CAACuC,KADnB,EAC0B,eAD1B,EAC2C,CAD3C,EAC8C,CAD9C,EAEG5E,IAFH,CAEQ,CAFR,EAGGuE,MAHH;AAKD,CAvDD","file":"axial.8721c403.js","sourceRoot":"..","sourcesContent":["//export const file = 'https://cdn.rawgit.com/FNNDSC/data/master/nifti/adi_brain/adi_brain.nii.gz';\r\n//export const file = '..//data//adi_brain.nii.gz';\r\nexport const file = 'https://ghcdn.rawgit.org/sainitripti/visualiser/master/data/adi_brain.nii.gz';\r\n\r\nexport const colors = {\r\n  red: 0xff0000,\r\n  lightGrey: 0xffffff,\r\n};\r\n\r\n\r\nexport let boxData = {\r\n    width: 50,\r\n    height: 50,\r\n    depth: 50,\r\n    widthSegments: 1,\r\n    heightSegments: 1,\r\n    depthSegments: 1,\r\n    rotateX: 0,\r\n    rotateY: 0,\r\n    rotateZ: 0, \r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0\r\n  };\r\n/*\r\nfetch(\"..//data//box.json\")\r\n.then(response => {\r\n   return response.json();\r\n})\r\n.then(data => {\r\n  boxData = data[\"boxData\"];\r\n  gui();\r\n  generateGeometry();\r\n});\r\n*/\r\n\r\nconst geometry = new THREE.BoxGeometry( 1, 1, 1);\r\nconst material = new THREE.MeshBasicMaterial( {transparent: true, color:0xff0000, opacity:0.5, side: THREE.DoubleSide, wireframe: true} );\r\n\r\nexport const cube = new THREE.Mesh( geometry, material );\r\nexport const axialCube = new THREE.Mesh( geometry, material );\r\nexport const coronalCube = new THREE.Mesh( geometry, material );\r\nexport const sagittalCube = new THREE.Mesh( geometry, material );\r\n\r\nconst arrCube = [cube, axialCube, coronalCube, sagittalCube];\r\nexport function generateGeometry() {\r\n  \r\n  arrCube.forEach(function(element)\r\n  {\r\n  \telement.geometry.dispose();\r\n  \telement.geometry = new THREE.BoxGeometry( \r\n\t  boxData.width, \r\n\t  boxData.height, \r\n\t  boxData.depth, \r\n\t  boxData.widthSegments, \r\n\t  boxData.heightSegments, \r\n\t  boxData.depthSegments);\r\n\telement.rotation.x = boxData.rotateX;\r\n\telement.rotation.y = boxData.rotateY;\r\n\telement.rotation.z = boxData.rotateZ;\r\n\telement.position.x = boxData.positionX;\r\n\telement.position.y = boxData.positionY;\r\n\telement.position.z = boxData.positionZ;\r\n  });\r\n  \r\n}\r\n\r\nfunction gui() {\r\n  const gui = new dat.GUI({\r\n    autoPlace: false,\r\n  });\r\n\r\n  const customContainer = document.getElementById('main-gui-container');\r\n  customContainer.appendChild(gui.domElement);\r\n\r\n  const boxFolder = gui.addFolder( 'Box Geometry' );\r\n\r\n  boxFolder.add( boxData, 'width', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'height', 1, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depth', 1, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'widthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'heightSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'depthSegments', 1, 10 ).step( 1 ).onChange( generateGeometry );\r\n\r\n  boxFolder.add( boxData, 'rotateX', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateY', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'rotateZ', 0, 360 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData , 'positionX', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionY', -100, 100 ).onChange( generateGeometry );\r\n  boxFolder.add( boxData, 'positionZ', -100, 100 ).onChange( generateGeometry );\r\n\r\n  boxFolder.open();\r\n};\r\n\r\n\r\n","import { colors, file, axialCube } from './utils.js';\r\n\r\n// Setup renderer\r\nconst container = document.getElementById('axial-container');\r\nconst renderer = new THREE.WebGLRenderer({\r\n  antialias: true,\r\n});\r\nrenderer.setSize(container.offsetWidth, container.offsetHeight);\r\nrenderer.setClearColor(colors.lightGrey, 1);\r\nrenderer.setPixelRatio(window.devicePixelRatio);\r\ncontainer.appendChild(renderer.domElement);\r\n\r\nconst scene = new THREE.Scene();\r\n\r\nscene.add( axialCube );\r\n\r\nconst camera = new AMI.OrthographicCamera(\r\n  container.clientWidth / -2,\r\n  container.clientWidth / 2,\r\n  container.clientHeight / 2,\r\n  container.clientHeight / -2,\r\n  0.1,\r\n  10000\r\n);\r\n\r\n// Setup controls\r\nconst controls = new AMI.TrackballOrthoControl(camera, container);\r\ncontrols.staticMoving = true;\r\ncontrols.noRotate = true;\r\ncamera.controls = controls;\r\n\r\nconst onWindowResize = () => {\r\n  camera.canvas = {\r\n    width: container.offsetWidth,\r\n    height: container.offsetHeight,\r\n  };\r\n  camera.fitBox(2);\r\n\r\n  renderer.setSize(container.offsetWidth, container.offsetHeight);\r\n};\r\nwindow.addEventListener('resize', onWindowResize, false);\r\n\r\nconst loader = new AMI.VolumeLoader(container);\r\nloader\r\n  .load(file)\r\n  .then(() => {\r\n    const series = loader.data[0].mergeSeries(loader.data);\r\n    const stack = series[0].stack[0];\r\n    loader.free();\r\n\r\n    const stackHelper = new AMI.StackHelper(stack);\r\n    stackHelper.bbox.visible = false;\r\n    stackHelper.border.color = colors.red;\r\n    stackHelper.orientation = 0;\r\n    scene.add(stackHelper);\r\n\r\n    gui(stackHelper);\r\n\r\n    // center camera and interactor to center of bouding box\r\n    // for nicer experience\r\n    // set camera\r\n    const worldbb = stack.worldBoundingBox();\r\n    const lpsDims = new THREE.Vector3(\r\n      worldbb[1] - worldbb[0],\r\n      worldbb[3] - worldbb[2],\r\n      worldbb[5] - worldbb[4]\r\n    );\r\n\r\n    const box = {\r\n      center: stack.worldCenter().clone(),\r\n      halfDimensions: new THREE.Vector3(lpsDims.x-70, lpsDims.y-70, lpsDims.z-70),\r\n    };\r\n\r\n    // init and zoom\r\n    const canvas = {\r\n      width: container.clientWidth,\r\n      height: container.clientHeight,\r\n    };\r\n\r\n    camera.directions = [stack.xCosine, stack.yCosine, stack.zCosine];\r\n    camera.box = box;\r\n    camera.canvas = canvas;\r\n    camera.orientation = 'axial';\r\n    camera.update();\r\n    camera.fitBox(2);\r\n  })\r\n  .catch(error => {\r\n    window.console.log('oops... something went wrong...');\r\n    window.console.log(error);\r\n  });\r\n\r\nconst animate = () => {\r\n  controls.update();\r\n  renderer.render(scene, camera);\r\n\r\n  requestAnimationFrame(function() {\r\n    animate();\r\n  });\r\n};\r\n\r\nanimate();\r\n\r\nconst gui = stackHelper => {\r\n  const gui = new dat.GUI({\r\n    autoPlace: false,\r\n  });\r\n\r\n  const customContainer = document.getElementById('axial-gui-container');\r\n  customContainer.appendChild(gui.domElement);\r\n  const camUtils = {\r\n    invertRows: false,\r\n    invertColumns: false,\r\n    rotate45: false,\r\n    rotate: 0,\r\n    orientation: 'axial',\r\n    convention: 'radio',\r\n  };\r\n\r\n  // camera\r\n  const cameraFolder = gui.addFolder('Camera');\r\n  const invertRows = cameraFolder.add(camUtils, 'invertRows');\r\n  invertRows.onChange(() => {\r\n    camera.invertRows();\r\n  });\r\n\r\n  const invertColumns = cameraFolder.add(camUtils, 'invertColumns');\r\n  invertColumns.onChange(() => {\r\n    camera.invertColumns();\r\n  });\r\n\r\n  const rotate45 = cameraFolder.add(camUtils, 'rotate45');\r\n  rotate45.onChange(() => {\r\n    camera.rotate();\r\n  });\r\n\r\n  cameraFolder\r\n    .add(camera, 'angle', 0, 360)\r\n    .step(1)\r\n    .listen();\r\n\r\n  const conventionUpdate = cameraFolder.add(camUtils, 'convention', ['radio', 'neuro']);\r\n  conventionUpdate.onChange(value => {\r\n    camera.convention = value;\r\n    camera.update();\r\n    camera.fitBox(2);\r\n  });\r\n\r\n  const stackFolder = gui.addFolder('Stack');\r\n  stackFolder\r\n    .add(stackHelper, 'index', 0, stackHelper.stack.dimensionsIJK.z - 1)\r\n    .step(1)\r\n    .listen();\r\n  stackFolder\r\n    .add(stackHelper.slice, 'interpolation', 0, 1)\r\n    .step(1)\r\n    .listen();\r\n\r\n};\r\n"]}